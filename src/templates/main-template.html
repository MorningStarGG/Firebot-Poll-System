<style>
    .effect-setting-content {
        margin-bottom: -10px;
    }
</style>
<!-- Main Poll Settings Section -->
<eos-container header="Poll Settings" aria-label="Configure main poll settings">
    <firebot-input input-title="Poll Title" model="effect.pollTitle" placeholder="Enter poll title" aria-label="Enter the title for your poll"></firebot-input>
    
    <!-- Poll Options Input Mode Selection -->
    <h4>Poll Options Input Mode</h4>
    <label class="control-fb control--checkbox" aria-label="Toggle between custom variable and manual input">Use Custom Variable or File
        <input type="checkbox" ng-model="effect.pollOptions.useTextArea">
        <div class="control__indicator"></div>
    </label>

    <!-- Options Input Section -->
    <div style="margin-bottom: 10px;">
        <!-- Text Area Input Mode -->
        <div ng-if="effect.pollOptions.useTextArea" aria-label="Custom variable or file input section">
            <firebot-input input-title="Variable/File" model="effect.pollOptions.textAreaInput"
                placeholder="Enter one option per line or use $variable" aria-label="Enter poll options or variable"></firebot-input>
            <div style="margin: 10px 0;" class="alert alert-warning" role="alert">
                <i class="fas fa-sync"></i>
                Only ONE option PER LINE in your file or variable!
            </div>
        </div>

        <!-- Manual Options Input -->
        <div style="margin-top: 15px" ng-if="!effect.pollOptions.useTextArea" aria-label="Manual poll options input section">
            <h4>Poll Options</h4>
            <div style="margin-bottom: 10px;" ng-repeat="option in effect.pollOptions.optionsList track by $index">
                <div class="input-group">
                    <firebot-input input-title="Option {{$index + 1}}" model="option.option_name" aria-label="Enter option {{$index + 1}}"></firebot-input>
                    <span class="input-group-btn">
                        <button class="btn btn-danger" ng-click="removeOption($index)" aria-label="Remove option {{$index + 1}}">
                            <i class="far fa-trash-alt"></i>
                        </button>
                    </span>
                </div>
            </div>
            <button class="btn btn-primary" ng-click="addOption()" aria-label="Add new poll option">Add Option</button>
        </div>
    </div>
</eos-container>

<!-- Poll Configuration Section -->
<eos-container header="Poll Configuration" pad-top="true" aria-label="Configure poll behavior settings">
    <div class="input-group">
        <div style="margin-bottom: 10px;">
            <firebot-input input-title="Vote Command To Show" model="effect.pollOptions.votingCommand"
                placeholder="!vote" aria-label="Set voting command"></firebot-input>
        </div>
        <div class="controls-fb-inline">
            <label class="control-fb control--checkbox" aria-label="Enable automatic poll closing">Auto close poll
                <input type="checkbox" ng-model="effect.pollOptions.autoClose">
                <div class="control__indicator"></div>
            </label>
            <label class="control-fb control--checkbox" aria-label="Allow users to vote multiple times">Allow Multiple Votes
                <input type="checkbox" ng-model="effect.pollOptions.allowMultipleVotes">
                <div class="control__indicator"></div>
            </label>
        </div>
        <firebot-input style="margin-bottom: 10px;" ng-if="effect.pollOptions.autoClose"
            input-title="Poll Duration (seconds)" type="number" model="effect.pollOptions.duration" 
            aria-label="Set poll duration in seconds"></firebot-input>
        <firebot-input style="margin-bottom: 10px;" ng-if="effect.pollOptions.autoClose"
            input-title="Display Duration After Close (seconds)" type="number"
            model="effect.pollOptions.displayDuration" aria-label="Set display duration after poll closes"></firebot-input>
    </div>
</eos-container>

<!-- Poll Style Settings Section -->
<eos-container header="Poll Style Settings" pad-top="true" aria-label="Configure poll visual appearance">
    <div style="margin-bottom: 10px;" class="row">
        <div class="col-md-6">
            <div class="input-group" style="margin-bottom: 10px;">
                <color-picker-input model="effect.styles.backgroundColor" label="BG Color"
                    aria-label="Select poll background color"></color-picker-input>
            </div>
            <div class="input-group" style="margin-bottom: 10px;">
                <color-picker-input model="effect.styles.accentColor" label="Accent Color"
                    aria-label="Select poll accent color"></color-picker-input>
            </div>
            <div class="input-group" style="margin-bottom: 10px;">
                <color-picker-input model="effect.styles.optionColor" label="Text Color"
                    aria-label="Select option text color"></color-picker-input>
            </div>
            <div class="input-group" style="margin-bottom: 10px;">
                <color-picker-input model="effect.styles.trackColor" label="Bar Color"
                    aria-label="Select progress track color"></color-picker-input>
            </div>
        </div>
        <div class="col-md-6">
            <div class="input-group" style="margin-bottom: 10px;">
                <color-picker-input model="effect.styles.titleColor" label="Title Color"
                    aria-label="Select title text color"></color-picker-input>
            </div>
            <div class="input-group" style="margin-bottom: 10px;">
                <color-picker-input model="effect.styles.progressTextColor" label="Bar Text Color"
                    aria-label="Select progress text color"></color-picker-input>
            </div>
            <div class="input-group" style="margin-bottom: 10px;">
                <color-picker-input model="effect.styles.shadowColor" label="Text Shadow"
                    aria-label="Select option text shadow color"></color-picker-input>
            </div>
            <div class="input-group" style="margin-bottom: 10px;">
                <color-picker-input model="effect.styles.progressColor" label="Bar Fill Color"
                    aria-label="Select progress fill color"></color-picker-input>
            </div>
        </div>
        <firebot-input input-title="Poll Scale" model="effect.styles.pollScale" placeholder="1" aria-label="Set poll scale size"></firebot-input>
    </div>
</eos-container>

<!-- Poll Display Settings Section -->
<eos-container header="Poll Display Settings" pad-top="true" aria-label="Configure poll display options">
    <div class="controls-fb-inline" style="margin-top: 15px">
        <label class="control-fb control--checkbox" aria-label="Toggle vote count visibility">Show vote count
            <input type="checkbox" ng-model="effect.display.showVoteCount">
            <div class="control__indicator"></div>
        </label>
        <label class="control-fb control--checkbox" aria-label="Toggle percentage display">Show percentages
            <input type="checkbox" ng-model="effect.display.showPercentages">
            <div class="control__indicator"></div>
        </label>
        <label class="control-fb control--checkbox" aria-label="Toggle voting command visibility">Show voting command
            <input type="checkbox" ng-model="effect.display.showVotingCommand">
            <div class="control__indicator"></div>
        </label>
        <label class="control-fb control--checkbox" aria-label="Toggle progress animation">Animate Progress
            <input type="checkbox" ng-model="effect.display.animateProgress">
            <div class="control__indicator"></div>
        </label>
        <label class="control-fb control--checkbox" aria-label="Toggle emoji removal from title">Remove emojis from title
            <input type="checkbox" ng-model="effect.display.removeEmojis.fromTitle">
            <div class="control__indicator"></div>
        </label>
        <label class="control-fb control--checkbox" aria-label="Toggle emoji removal from options">Remove emojis from options
            <input type="checkbox" ng-model="effect.display.removeEmojis.fromOptions">
            <div class="control__indicator"></div>
        </label>
    </div>
</eos-container>

<!-- Overlay Position and Instance Settings -->
<eos-overlay-position effect="effect" pad-top="true"></eos-overlay-position>
<eos-overlay-instance effect="effect" pad-top="true"></eos-overlay-instance>

<!-- Overlay Information Alert -->
<eos-container>
    <div class="effect-info alert alert-warning" role="alert">
        This effect requires the Firebot overlay to be loaded in your broadcasting software.
        <a href ng-click="showOverlayInfoModal()" style="text-decoration:underline"
            aria-label="Learn more about Firebot overlay requirements">Learn more</a>
    </div>
</eos-container>